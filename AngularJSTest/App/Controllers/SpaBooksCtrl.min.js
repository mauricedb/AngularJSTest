var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},App;(function(n){var t=function(){function n(n){this.$scope=n}return n.$inject=["$scope"],n}(),i,r,u,f,e;n.SpaBooksCtrl=t,i=function(t){function i(n){t.call(this,n),this.$scope=n,n.select=angular.bind(this,this.select),this.loadData()}return __extends(i,t),i.$inject=["$scope"],i.prototype.loadData=function(){this.$scope.books=n.createBooks(),this.$scope.selected=this.$scope.books[0]},i.prototype.select=function(n){this.$scope.selected=n},i}(t),n.SpaBooksPage1Ctrl=i,r=function(n){function t(t){n.call(this,t),this.$scope=t,t.createdAt=(new Date).toLocaleTimeString()}return __extends(t,n),t.$inject=["$scope"],t}(t),n.SpaBooksPage2Ctrl=r,u=function(){function n(n,t){this.$scope=n,this.Books=t,n.select=angular.bind(this,this.select),this.loadData()}return n.$inject=["$scope","Books"],n.prototype.loadData=function(){var n=this;this.$scope.books=this.Books.query(function(){n.$scope.selected=n.$scope.books[0]})},n.prototype.select=function(n){this.$scope.selected=this.Books.get({id:n.id})},n}(),n.SpaBooksPage3Ctrl=u,f=function(){function n(n,t){this.$scope=n,this.Books=t;var i=this;n.select=angular.bind(this,this.select),n.addNew=angular.bind(this,this.addNew),n.save=angular.bind(this,this.save),this.$scope.books=this.Books.query(function(){i.$scope.selected=angular.extend({},i.$scope.books[0])})}return n.$inject=["$scope","Books"],n.prototype.select=function(n){this.$scope.selected=this.Books.get({id:n.id})},n.prototype.save=function(n,t){var i=this;n.id?this.Books.update(n,function(n){i.reset(t),i.updateBooks(n)},function(){alert("Oops")}):this.Books.save(n,function(n){i.reset(t),i.$scope.books.push(n),i.select(n)},function(){alert("Oops")})},n.prototype.reset=function(n,t){var f=this.$scope,i,r,u;$("form[name="+n+"], form[name="+n+"] .ng-dirty").removeClass("ng-dirty").addClass("ng-pristine"),i=f[n],i.$dirty=!1,i.$pristine=!0;for(r in i)i[r].$pristine===!1&&(i[r].$pristine=!0),i[r].$dirty===!0&&(i[r].$dirty=!1);for(u in t)f[u]=t[u]},n.prototype.updateBooks=function(n){var t=this.findBook(n.id);angular.extend(t,n)},n.prototype.findBook=function(n){return this.$scope.books.reduce(function(t,i){return i.id===n&&(t=i),t})},n.prototype.addNew=function(n){this.reset(n),this.$scope.selected={id:0,title:"",author:""}},n}(),n.SpaBooksPage4Ctrl=f,e=angular.module("app"),e.config(["$routeProvider",function(n){n.when("/page1",{controller:"App.SpaBooksPage1Ctrl",templateUrl:"/SpaBooks/page1"}),n.when("/page2",{controller:"App.SpaBooksPage2Ctrl",templateUrl:"/SpaBooks/page2"}),n.when("/page3",{controller:"App.SpaBooksPage3Ctrl",templateUrl:"/SpaBooks/page3"}),n.when("/page4",{controller:"App.SpaBooksPage4Ctrl",templateUrl:"/SpaBooks/page4"}),n.otherwise({redirectTo:"/page1"})}])})(App||(App={}))